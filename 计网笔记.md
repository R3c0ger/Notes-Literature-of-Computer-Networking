# 计算机网络

<center><b>By Recogerous</b></center>

[TOC]

## 第一章  概述

计算机网络是<u>通信技术</u>与<u>计算机技术</u>相结合，实现<u>信息传输</u>和<u>资源共享</u>的一种信息系统。

### 分类

| 基于地域距离分类 | 局域网LAN、城域网MAN、广域网WAN、个域网、体域网、因特网 |
| ---------------- | ---------------------- |
| 基于传输技术分类 | 广播式网络、点到点网络（见 1.7 练习与拓展） |
| 基于传输介质分类 | 有线网、无线网（移动通讯 ≠ 无线通讯） |
| 基于管理技术分类 | 客户机-服务器方式（CS方式）、对等网方式 |

### 网络拓扑结构

网络拓扑结构分类指网上<u>计算机或设备</u>与<u>传输媒介</u>形成的<u>结点与线</u>的物理构成模式。计算机网络拓扑结构取决于**通信子网**。（见 1.4 OSI 参考模型）

网络的结点有两类：
- —类是转换和交换信息的转接结点，包括结点交换机、集线器和终端控制器等；
- 另一类是访问结点，包括计算机主机和终端等。

线则代表各种传输媒介，包括有形的和无形的。

#### 总线型

特点：一根电缆连接所有节点；简单，易于部署，成本低，易于扩展；电气信息延迟时间不确定，故障隔离和监测困难。

应用：主干线路、小型网络、某一网段

#### 星型

特点：所有节点连接到中心设备；集中监测和管理；需要更多的电缆；中央设备的故障可能影响全网；网络性能基本上由中心节点决定。

应用：局域网连接

#### 环形

持有令牌的节点发送信息，发送完后交给环的下一个节点。

特点：**时延确定**；网络中所有的节点组成一个闭合的环；网络结点同时充当转发器；环上的数据只能按一个方向传输；节点通过环发送数据的机会均等；任何时刻，只能有一个节点传输数据。

应用：令牌环

#### 网状（典型的计算机网络拓扑）

特点：网状是几种标准网络拓扑的混合形式；拓扑中的任意两个节点之间均有不止一条连接。

应用：广域网连接

$p.s.$ 判断网络拓扑类型，还需要看网络的工作机制，而非只看物理形式。

#### 对比

| **网络拓扑** | **优点**                                                     | **缺点**                                                     |
| ------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 总线         | 简单，易于部署，成本低，易于扩展。                           | 时延不确定，故障隔离和检测困难。                             |
| 星型         | 能集中监测和管理，易于部署，<br/>一个节点的故障不影响其他节点。 | 如果中心连接设备故障，<br/>可能影响整个网络。                |
| 环型         | 所有节点同等访问机会，<br/>性能稳定均衡。                    | —个节点的故障影响整个网络；<br/>在负载很轻时，信道利用率较低。 |
| 网状         | 可靠性较高，当—条线路有故障时，<br/>不会影响整个系统工作。   | 由于节点与多个节点连接，<br/>节点的路由选择和流量控制难度大，<br/>管理软件复杂，硬件成本高。 |

### 计算机网络体系结构

#### 网络分层

优点：1. 各层的功能独立，复杂问题简单化；2. 实现模块化设计；3. 便于实现和维护；4. 有利于标准化；5. 各层的功能、结构相对稳定；6. 实现功能分工。

![](assets/0103Layers01.png)

接口与服务：

![](assets/0103Layers02.png)
- IDU：Interface Data Unit，接口数据单元，上下层要交互的信息，包括接口控制信息。
- SDU：服务数据单元，即传递的用户数据。
- ICI：上下层实体（entity）之间通讯的约束。    报头：对等实体之间的约束。

每一层收到上层发来的 IDU，根据 IDU 的控制信息进行处理之后，将 SDU 封装，加上报头，发送出去。

#### 服务原语 (Primitive)

![](assets/0103Primitive01.png)

将服务定义为原语，原语通常指不可再分的操作，在这里为：请求、指示、响应、证实。

建立连接需要上述四步，取消连接可能只需要其中两个原语，没有响应和证实。

#### 服务

服务分类：
- 面向连接的服务（通讯前是否协商、信息是否可以标识出顺序）
- 无连接的服务
- 有确认（可靠）的服务（是否对接受的信息进行确认，即是否有响应和证实）
- 无确认（不可靠）的服务

服务质量（QoS）：针对不同用户或数据流采用不同的优先级

##### 面向连接的服务

基于电话系统——首先建立连接、其次使用此连接通信、最后释放连接。

最本质的特点：发送端将数据依次压入管道，接收方依次取出数据，数据基本依次序抵达。

| **服务类型** | **应用例子** |
| ------------ | ------------ |
| 可靠的消息流 | 报文序列     |
| 可靠的字节流 | 远程登录     |
| 不可靠的连接 | 数字化的声音、视频 |

##### 无连接的服务

基于邮政系统——通信双方直接发送报文（message），无需握手。

最本质的特点：每个报文均携带完整地址，被独立路由，可能存在后发先到的情况。

| **服务类型**   | **应用例子** |
| -------------- | ------------ |
| 不可靠的数据报（datagram） | 电子函件     |
| 有确认的数据报 | 挂号邮件     |
| 问答           | 数据查询     |

#### 协议与协议栈

 - 协议：为进行网络中的数据交换而建立的规则、标准或约定。
 - 语法：数据与控制信息的结构或格式。
 - 语义：发出何种控制信息，完成何种动作以及做出何种响应。
 - 同步：事件实现顺序的详细说明。

![](assets/0103Protocol01.png)

- 协议是“水平的”，即协议是控制对等实体之间通信的规则。
- 服务是“垂直的”，即服务是由下层向上层通过层间接口提供的。

> 在文献中也还可以见到术语“协议栈”(protocol stack)。这是因为几个层次画在一起很像一个栈 (stack) 的结构。

### OSI参考模型

> 计算机网络是通信技术与计算机技术相结合，实现信息传输和资源共享的一种信息系统。

资源子网：计算机技术，负责实现资源共享。处于网络的外围，由主机系统、终端、终端控制器、外设、各种软件资源和信息组成。

通信子网：通信技术，负责进行信息传输。由通信控制处理机、通信线路与其他设备组成。

- 通信子网至少应分为三层：

  - 网络层（Network Layer）：寻址和路由、附加不同网络的互联
  - 数据链路层（Data Link Layer）：将网络层交下来的 IP 数据报组装成帧；规范相邻转发节点之间行为；流量控制、差错控制
  - 物理层（Physical Layer）：把数据包转换成电信号，以比特流为介质传输信息，确保正确的编码方式

- 资源子网分四层：

  - 传输层（Transport Layer）：完成屏蔽通信子网的不同，向上提供统一接口的功能（最核心）
  - 会话层（Session Layer）：管理不同的会话，当会话中断时恢复状态、同步
  - 表示层（Presentation Layer）：格式转换、数据压缩、数据加密
  - 应用层（Application Layer）：为用户提供应用接口，提供界面和应用程序；分配 IP 地址；域名解析

| 应用层     | 文件传输访问，消息、作业处理等各类应用程序进程及服务     |
| ---------- | ----------------------------------------------------|
| 表示层     | 数据表示（格式转换）、数据加解密、压缩和恢复、协议转化和语法协商等 |
| 会话层     | 会话连接和管理，同步控制                               |
| 传输层     |<font color="#f79646"> （最重要）建立端对端的连接、流量控制，并决定向上层提供的服务</font>       |
| 网络层     | 寻址、路由选择、地址解析、数据分组、拥塞控制与网络互连等   |
| 数据链路层 | <font color="#f79646">成帧、差错和流量控制、数据链路管理 </font>                    |
| 物理层     | <font color="#ff0000">物理网络的机械、电气和光特性以及接口的定义，以传输比特流</font> |

![](assets/0103OSI01.png)

![](assets/0103Protocol02.png)

> 虽然应用进程数据要经过如图 1-17 所示的复杂过程才能送到终点的应用进程，但这些复杂过程对用户屏蔽掉了，以致应用进程 AP$_1$ 觉得好像是直接把数据交给了应用进程 AP$_2$。同理，任何两个同样的层次（例如在两个系统的第 4 层）之间，也好像如同图 1-17 中的水平虚线所示的那样，把数据（即数据单元加上控制信息）通过水平虚线直接传递给对方。这就是**所谓的“对等层”(peer layers) 之间的通信。** 我们以前经常提到的各层协议，实际上就是在各个对等层之间传递数据时的各项规定。

#### 各层具体功能

1. 物理层约束四个接口：机械接口、电气接口、光接口、过程接口（见 1.7 练习与拓展）
2. 数据链路层：
   1. 成帧（framing）：避免歧义，限制出现错误的范围（即对于消息流定义消息边界、分帧后减少消息出错的概率）
   2. 差错控制、流量控制、链路管理
   3. 另外，分两个子层：逻辑链路控制子层 (Logical Link Control) 和媒体访问控制子层 (Media Access Control)

3. 网络层
   1. 把网络协议数据单元从源传到目标 (路由)
   2. 寻址
   3. 网络互联
   4. 为上层提供虚连接或数据报服务

路由选择要素：性能标准、路由选择时机、路由选择地点、路由信息来源、路由选择策略、路由信息更新

路由算法：静态（扩散法、固定路由选择、随机路由选择、基于流量的路由选择）、动态（独立路由选择、集中路由选择、分布式路由选择）

4. 传输层：传输质量控制——分 ABC 类网络分别提供不同级别的服务：
	1. 简单类
	2. 基本错误恢复类
	3. 多路复用类
	4. 错误恢复和多路复用类
	5. 错误检测和恢复类
	
5. 会话层：概念上的层，功能很弱，往往与传输层和应用层合并（见 1.7 练习与拓展）
	1. 会话管理
	2. 同步管理
	3. 活动管理
	
6. 表示层：概念上的层
   1. 数据表达：
   
      提供数据表示和传送中的数据结构、提供数据编码及解码中的数据结构
   
   2. 数据压缩（和数据表达实际上都在应用层实现）
   
   3. 数据加密（在除了物理层之外的实际的层次都有实现）
   
7. 应用层：直接与应用程序接口，分与通信相关和与通信无关两大类；路由协议大部分在应用层

   1. 远程管理
   2. 电子邮件
   3. 虚拟终端
   4. 域名解析
   5. 路由协议


### TCP/IP 参考模型

![](assets/010501.png)

TCP/IP参考模型：应用层、传输层、网络层/互连层、网络接口层（链路层，主机一网络层）

![](assets/010502.png)

TCP/IP 协议栈的特点：是工业标准协议集，是可路由协议网状，具有健壮、可伸缩、跨平台结构，是 lnternet 访问通用协议集。

OSI 参考模型与 TCP/IP 参考模型的映射关系：

![](assets/010503.png)

#### 应用层

应用层提供端口号的机制，套接字 Socket = lP Address + TCP (80) or UDP (53) Port

> 所谓套接字 (Socket)，就是对网络中不同主机上的应用进程之间进行双向通信的端点的抽象。套接字 Socket =（IP 地址：端口号）

- 服务器端：

  - 80 端口：上网用的端口号，Web 服务器，为 HTTP 协议保留，TCP 协议；

  - 53 端口：进行域名解析的端口号，DNS 服务器，UDP 协议。

- 客户端：端口号不固定，从 1024 以上随机产生。

#### 传输层

| **TCP**                      | **UDP**                    |
| ---------------------------- | -------------------------- |
| 可靠的、字节流的             | 不可靠的，数据流的         |
| 单播通信                     | 多播或广播通信             |
| 往往在传输大文件时使用       | 小文件                     |
| 快速性无要求（需要三次握手） | 快速发送数据（不建立连接） |

#### 网络层

核心协议：IP，负责寻址和路由；

辅助协议：ARP（将 IP 地址（逻辑地址）运算成网卡（物理）地址）、ICMP（对网络中的故障进行定位，进行简单的网络管理）、IGMP（支持在网络层实现多播通讯）

#### 网络接口层

没有明确的约束

### 网络性能参数

#### 速率

指的是连接在计算机网络上的主机在数字信道上传送数据的速率，它也称为数据率 (data rate) 或比特率 (bit rate)。

速率的单位是 bit/s、kbit/s、Mbit/s、Gbit/s 等，以 $10^3$ 为单位递增。例如 4×10^10 bit/s 的数据率就记为 40 Gbit/s。b/s = bps (bit per second)

M：Mega，兆‌，一百万，$10^6$ 　　G：Giga，吉，千兆，十亿，$10^9$ ‌　　T：Tera，太，$10^{12}$

速率往往是指额定速率或标称速率，非实际运行速率。

#### 带宽（Band width）

本来是指信号具有的频带宽度，其单位是赫 (或千赫、兆赫、吉赫等)。

在计算机网络中，指在单位时间内网络中的某信道所能通过的“最高数据率”。

> 这种意义的带宽的单位就是数据率的单位 bit/s，是“比特每秒”。

前者为频域称谓，而后者为时域称谓。通信链路的“带宽”越宽，其所能传输的“最高数据率”也越高。

#### 吞吐量 (Throughput)

在单位时间内通过某个网络（或信道、接口）成功传送的实际数据量。速率中还包含报头信息、控制信息，吞吐量指有效数据量。

吞吐量受网络的带宽或网络的额定速率的限制。

吞吐量更能准确在表示到底有多少数据量通过网络。

#### 时延（Delay / latency）

指数据 (一个报文或分组，甚至比特) 从网络 (或链路) 的一端传送到另一端所需的时间。包括：

- 发送时延：数据帧从结点进入到传输媒体所需的时间。

  发送时延 = 接收时延 = 传输时延

  <u>发送时延 = 数据帧长度 (bit) / 发送速率 (bit/s)</u>

- 传播时延：电磁波在信道中传播花费的时间。

  <u>传播时延 = 信道长度 (m) / 电磁波在信道上的传播速率 (m/s)</u>

- 处理时延：主机或路由器处理收到数据花费的时间。

- 排队时延：数据在路由器中队列中排队花费的时间。

- 接入时延：有数据发送到获得信道使用权发送出去的时间。

> 发送时延 (transmission delay) 是主机或路由器发送数据帧所需要的时间，也就是从发送数据帧的**第一个比特**算起，到该帧的**最后一个比特发送完毕**所需的时间。

> 发送时延发生在**机器内部的发送器**中（一般就是发生在网络适配器中......)，与传输信道的长度（或信号传送的距离）没有任何关系。但传播时延则发生在**机器外部的传输信道媒体**上，而与信号的发送速率无关。信号传送的距离越远，传播时延就越大。

总时延=发送时延＋传播时延＋处理时延＋排队时延

![](assets/0106delay01.png)

#### 时延带宽积（Bandwidth delay product）

链路的时延带宽积又称为以比特为单位的链路长度。时延带宽积 = 传播时延 × 带宽

> 我们可以用图 1-13 的示意图来表示时延带宽积。这是一个代表链路的圆柱形管道，**管道的长度**是链路的**传播时延**（请注意，现在以时间作为单位来表示链路长度)，而管道的**截面积**是链路的**带宽**。因此时延带宽积就表示这个管道的体积，表示这样的链路可容纳多少个比特。

![](assets/0106BDP01.png)

> 链路的时延带宽积又称为以比特为单位的链路长度。

> 不难看出，管道中的比特数表示从发送端发出但尚未到达接收端的比特数。

只有在代表链路的管道都充满比特时，链路才得到了充分利用。

#### 时延抖动（Delay jitter）

指分组延迟的变化程度。网络时延随时都在不停的变化称为抖动。每个数据报传输路径不同，造成到达节点的时延不确定，因此出现时延抖动。

抖动对于实时性的传输将会是一个重要参数。

利用缓存可以克服过量的抖动，但是这将会增加时延。

#### 往返时间（Round-Trip Time，RTT）

指发送一个信号所花费的时间加上确认接收该信号所花费的时间。

RTT 也称为 ping 时间，可以通过 ping 命令确定。

RTT 对于实现可靠通信非常重要，用于计算重传时间。

#### 利用率（Utilization）

- 信道利用率指发送方在一个发送周期的时间内，有效的发送数据所需要的时间占整个发送周期的比率。

- 网络利用率是全网络的信道利用率的加权平均值。

信道利用率并非越高越好。$D=\dfrac{D_0}{1-U}$，$D_0$ 是网络空闲时的时延，$U$ 是网络利用率。当网络利用率接近最大值 1 时，网络产生的时延就趋于无穷大，即 $U\to1=U_\max$，$D\to \infty$。因此，信道利用率或网络利用率过高就会产生非常大的时延。

#### 非性能指标

费用 Cost、质量 Quality、标准化 Standardization、可靠性 Reliability、扩展性 Scalability、维护性 Maintainability

<div class="cover" style="page-break-after:always;"> </div>

### 练习与拓展

1.计算机网络系统的基本组成是：（C）
A. 局域网和广域网  B. 本地计算机网和通信网  C. **通信子网和资源子网**  D. 服务器和工作站

> **计算机网络的组成**：
> 从组成部分来看：硬件，软件，协议
> 从工作方式来看：边缘部分（主机），核心部分（网络和路由器）
> 从功能组成来看：通信子网（实现信息传输的设备和软件），资源子网（实现资源共享的设备和软件）
>
> > ————————————————
> > 版权声明：本文为CSDN博主「YouDaoHua」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
> > 原文链接：https://blog.csdn.net/YouDaoHua/article/details/105521260

---

2.关于广播式网络，说法错误的是（D）。
 A. 共享广播信道  B.不存在路由选择问题  C.可以没有网络层  D.不需要网络地址/不需要服务访问点

- 广播式网络：在网络中只有一个单一、公共的通信信道，由这个网络中所有的主机所共享，是局域网主要采用的方式。涉及到信道分配的问题。

- 点到点网络：发送者和接收者通过专属链路连接。

----

3.在计算机网络分层结构中，第 N 层与其上的 N+1 层的关系是<u>第 N 层向 N+1 层提供服务</u>。

> 我们再次关注某层**向它的上一层提供**的服务，即所谓一层的服务模型（service model）。...... 每层通过在该层中执行某些动作或**使用直接下层的服务**来提供服务。例如，由第 n 层提供的服务可能包括报文从网络的一边到另一边的可靠交付。这可能是通过使用第 n-1 层的边缘到边缘的不可靠报文传送服务，加上第 n 层的检测和重传丢失报文的功能来实现的。

“向上提供，使用下层”

----

4.网络协议的要素中（语义）用于协调和进行差错。

> 在计算机网络中要做到有条不紊地交换数据，就必须遵守一些事先约定好的规则。这些规则明确规定了所交换的数据的格式以及有关的同步问题。这里所说的**同步**不是狭义的（即同频或同频同相）而是广义的，即<u>在一定的条件下应当发生什么事件</u>（例如，应当发送一个应答信息），因而**同步含有时序的意思**。这些为进行网络中的数据交换而建立的规则、标准或约定称为**网络协议** （Network protocol)。网络协议也可简称为协议。更进一步讲，**网络协议主要由以下三个要素组成**：
> （1） 语法，即数据与控制信息的结构或格式；
> （2） 语义，即需要发出何种控制信息，完成何种动作以及做出何种响应；
> （3） 同步，即事件实现顺序的详细说明。

---

> 当两台主机要通信时，网络会在**两台主机之间**创建一条专用的**端到端**连接（end-to-end connection） 。

> 网络要通信，必须建立连接，不管有多远，中间有多少机器，都必须在两头（源和目的）间建立连接，一旦连接建立起来，就说已经是端到端连接了，即端到端是**逻辑链路**，这条路可能经过了很复杂的物理路线，但两端主机不管，只认为是有两端的连接，而且一旦通信完成，这个连接就释放了，物理线路可能又被别的应用用来建立连接了。

> **直接相连的节点对等实体的通信**叫点到点通信。它只提供一台机器到另一台机器之间的通信，不会涉及到程序或进程的概念。同时点到点通信并不能保证数据传输的可靠性，也不能说明源主机与目的主机之间是哪两个进程在通信，这些工作都是由传输层来完成的。  
>   
> 端到端通信建立在点到点通信的基础之上，它是由**一段段的点到点通信信道构成**的，是比点到点通信更高一级的通信方式，完成应用程序(进程)之间的通信。

>......计算机网络专业中端到端指客户端到客户端，也就是 pc 到 pc，p2p 也就是点到点通常指路由器某接口到某接口......
>
>> 作者：celeron533
>> 链接：https://www.zhihu.com/question/49245486/answer/114998653
>> 来源：知乎
>> 著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。

---

5.以下关于对 OSI 划分层次的原则的论述哪一个是正确的（D）。

A.网中各结点可以有不同的层次

B.不同结点的同等层可以有不同的功能

C.每一层使用上层提供的服务，并向其下层提供服务

D.不同结点的同等层按照协议实现对等层之间的通信

【解析】ISO 在制定 OSI 参考模型时对**层次划分的主要原则**：

1. 网络中各结点都具有相同的层次；

2. 不同结点的同等层具有相同的功能；

3. 不同结点的同等层通过协议来实现对等层之间的通信；

4. 同一结点内相邻层之间通过接口通信；

5. 每个层可以使用下层提供的服务，并向其上层提供服务。“提上用下”

---

6.( **传输层** ) 在系统之间提供可靠、**透明**的数据传送，提供链路传输的错误恢复和流量控制。

7.物理层接口的 4 个特性是（**机械特性、电气特性、功能特性、过程特性**）。

8.在 OSI 七层协议中，**提供**一种建立连接并有序传输数据的**方法**的层是（**会话层**）。

> OSI 采用了分层的结构化技术，从下到上共分七层：
>
> （1）物理层：该层包括物理连网媒介，如电缆连线连接器。该层的协议产生并检测电压以便发送和接收携带数据的信号。<u>提供为建立、维护和拆除物理链路所需要的机械的、电气的、功能的和规程的特性。</u>具体标准有 RS232、V.35、RJ-45、FDDI。
>
> （2）数据链路层：它控制网络层与物理层之间的通信。它的主要功能是将从网络层接收到的数据分割成特定的可被物理层传输的帧。常见的协议有IEEE802.3/.2、HDLC、PPP、ATM。
>
> （3）网络层：其主要功能是将网络地址（例如IP地址）翻译成对应的物理地址（例如，网卡地址并决定如何将数据从发送方路由到接收方。在TCP/IP协议中，网络层具体协议有IP、ICMP、IGMP、IPX、ARP等。
>
> （4）传输层：主要负责确保数据可靠、顺序、无错地从A点传输到B点。如提供建立、维护和拆除传送连接的功能；选择网络层提供最合适的服务；<u>在系统之间提供可靠的透明的数据传送，提供端到端的错误恢复和流量控制。</u>在TCP/IP协议中，具体协议有TCP、UDP、SPX。
>
> （5）会话层：负责在网络中的两节点之间建立和维持通信，以及提供交互会话的管理功能，如三种数据流方向的控制，即一路交互、两路交替和两路同时会话模式。常见的协议有RPC、SQL、NFS。
>
> （6）表示层：如同应用程序和网络之间的翻译官，在表示层，数据将按照网络能理解的方案进行格式化；这种格式化也因所使用网络的类型不同而不同。表示层管理数据的解密加密、数据转换、格式化和文本压缩。常见的协议有JPEG、ASCII、GIF、DES、MPEG。

> **机械特性：** 指明接口所用接线器的形状和尺寸、引脚数目和排列、固定和锁定装置等。
>
> **电气特性：** 指明在接口电缆的各条线上出现的电压范围。
>
> **功能特性：** 指明某条线上出现某一电平的电压意义。
>
> **过程特性：** 指明对于不同功能的各种可能事件的出现顺序。

> 传输层的主要任务是：向用户提供可靠的端到端的差错和流量控制，保证报文的正确传输。传输层的作用是向高层**屏蔽下层**数据通信的细节，即向用户**透明地**传送报文。

---

9.传播时延与链路带宽的关系是 ( A )。

A.**没有关系**  B.反比关系  C.正比关系  D.无法确定

【解析】传播时延 = 信道长度 (m) / 电磁波在信道上的传播速率 (m/s)

---

10.如果收发两端的传输距离是 10km，信号在信道上的传播速率是 2.0´105 km/s，数据长度为 1000B，数据发送速率为 100kbit/s，则其发送时延是 ( A )。

A.0.08s    B.0.16s    C.0.00005s    D.0.0001s

【解析】首先注意审题，“发送时延”；其次，1000B=1000×8bit。

## 第二章  物理层

### 物理层基本概念

物理层考虑如何在传输介质上传输比特流，尽量屏蔽掉不同的传输介质、不同的通讯手段的差异，向上提供一个统一的接口。用于物理层的协议也常称为物理层**规程(procedure)**。

物理层的主要任务为确定与传输媒体的接口有关的一些特性，即：

**①机械特性：** 指明接口所用接线器的形状和尺寸、引脚数目和排列、固定和锁定装置等。

**②电气特性：** 指明在接口电缆的各条线上出现的电压范围。

**③功能特性：** 指明某条线上出现某一电平的电压意义。

**④过程特性：** 指明对于不同功能的各种可能事件的出现顺序。（某种事件组合代表发生某事）

#### 数据通信的基础知识

##### 数据通信系统的模型

![](assets/0201model01.png)

![](assets/0201model02.png)

##### 常用术语

- 数据：运送消息的实体。

- 信号(signal)：数据的电气的或电磁的表现。

  - **模拟/连续信号**：代表消息的参数的**取值是连续**的。

  - **数字信号**：代表消息的参数的**取值是离散**的。

有时**离散信号**又与数字信号产生区分，数字信号在取值上离散，离散信号在**时间分布**上离散。

例如，在图 2-1 中，用户家中的调制解调器到电话端局之间的用户线上传送的就是模拟信号；用户家中的计算机到调制解调器之间或在电话网中继线上传送的就是数字信号。

从数据链路层往上，处理的基本都是数字信号。

---

在使用时间域 (简称时域）的波形表示数字信号时，代表不同离散数值的基本波形就称为**码元（符号）**。在使用二进制编码时，只有两种不同的码元，一种代表 0 状态而另一种代表 1 状态。

码元：在数字通信中常常用时间间隔相同的符号来表示一位二进制数字，这样的时间间隔内的信号称为二进制码元。每秒钟传送码元的数目称为**波特率**。幅值不同可以使码元承载更多的二进制值，这使得波特率和传播信息的速率——**比特率**有所不同。<u>比特率 = 波特率 × $log_2$符号状态数</u>

##### 有关信道的几个基本概念

- 信道：一般用来表示向某一个方向传送信息的媒体。

- 单向通信：只能有一个方向的通信而没有反方向的交互。

- 双向交替通信（半双通通信）：通信的双方都能发送信息，但不能双方同时发送或接收。

- 双向同时通信（全双通通信）：通信的双方可以同时发送和接收信息。

---

- 基带信号：没有经过调制（进行频谱搬移和变换）的原始，包括数字基带信号和模拟基带信号。
- 基带调制：仅对基带信号的波形进行变换，使它能够与信道特性相适应。变换后的信号仍然是基带信号。把这种过程称为编码（coding）。
- 带通信号：把基带信号经过载波调制后的信号，把信号的频率范围搬移到较高的频段以便在信道中传输。
- 带通调制：使用载波（carrier）进行调制，把基带信号的频率范围搬移到较高的频段，并转换为模拟信号。

局域网涉及基带调制。以下为基带调制的类型。

##### 编码方式（encoding）

![](assets/0201encode01.png)

- 不归零制：正电平代表 1，负电平代表 0。
- 归零制：正脉冲代表 1，负脉冲代表 0。
- 曼彻斯特编码：位周期中心的向上跳变代表 0，位周期中心的向下跳变代表 1。但也可反过来定义。
- 差分曼彻斯特编码：在每一位的中心处始终都有跳变。位开始边界有跳变代表 0，而位开始边界没有跳变代表 1。

$p.s.$ 单极性的不归零制会出现歧义，实际上得不到使用。

不归零制中，连续的 0 或 1 会在电平变换时出现放电效应，会造成采样出现错误。

归零制中，需要在脉冲的正中间进行采样，采样偏离就可能采样不到数据，因此发送方和接收方需要有严格的同步。局域网中可能不存在授时机构或装置，设备本身也可能产生偏移，从而影响判决，因而有曼彻斯特编码。

> 曼彻斯特编码(Manchester coding)，又称**自同步编码**、相位编码(phase encoding, PE)，能够用信号的变化来保持发送设备和接收设备之间的同步。

差分曼彻斯特编码也为自同步编码方式。

差分曼彻斯特编码中，如果线路接反了，不影响接收效果。但成本太高。

##### 带通调制方式（Modulation）

- 调幅（AM）：载波的**振幅**随基带数字信号而变化。
- 调频（FM）：载波的**频率**随基带数字信号而变化。
- 调相（PM）：载波的**初始相位**随基带数字信号而变化。

![](assets/0201mod01.png)

为了达到更高的信息传输速率，必须采用技术上更为复杂的多元制的振幅相位混合调制方法。例如，正交振幅调制 QAM (Quadrature Amplitude Modulation)。（见 2.1.2 练习与拓展）

不是码元越多越好。若每一个码元可表示的比特数越多，则在接收端进行解调时要正确识别每一种状态就越困难，出错率增加。

##### 信道的极限容量

信息传输速率不可能无限提高。实际的信道带宽受限，有噪声、干扰和失真，失真过大会无法识别。码元传输的速率越高、信号传输的距离越远、噪声干扰越大或传输媒体质量越差，在接收端的波形的失真就越严重。

信息的传输速率受限于两个准则：

- 奈氏准则（无噪声/理想条件下信道的最大数据速率）$\displaystyle C =2W\cdot \log_{2}V \;\textrm{(b/s)}$
文字描述：$V$ 为进制数/信号状态数，即“采用 $V$ 相制技术”；$V$ 表示<u>每个码元离散电平的数目（即多少种不同的码元）</u>，比如有 16 种不同的码元，则需要 4 位二进制位，因此数据传输率是码元传输率的 4 倍。在<u>带宽为 $W$ (Hz)</u> 的低通信道中，若不考虑噪声影响，则<u>码元传输的最高速率是 $2W$ (码元/秒)</u>。传输速率超过此上限，就会出现严重的码间串扰的问题，使接收端对码元的判决（即识别）成为不可能。

- <u>香农定理（有噪声/非理想条件下信道的最大数据速率）$\displaystyle C = W \cdot \log_{2} (1+S/N) \;\textrm{(b/s)}$</u> 
  文字描述：式中，$C$ 为信道的极限信息传输速率，$W$ 为信道的带宽（以 Hz 为单位)，$S$ 为信道内所传信号的平均功率，$N$ 为信道内部的高斯噪声功率。
  香农公式表明，信道的带宽或信道中的信噪比越大，信息的极限传输速率就越高。

所谓信噪比就是信号的平均功率和噪声的平均功率之比，常记为 $S/N$。但通常大家都是使用分贝 (dB) 作为度量单位。即：信噪比 (dB) = $\displaystyle 10 \log_{10} (S/N) \;\textrm{(dB)}$

【例】用香农公式计算一下，假定信道带宽为 $3100 \rm{Hz}$，最大信息传输速率为 $35 \textrm{kbit/s}$，那么若想使最大信息传输速率增加 $60\%$, 问信噪比 $S/N$ 应增大到多少倍? 如果在刚才计算出的基础上将信噪比 $S/N$ 再增大到 $10$ 倍，问最大信息速率能否再增加 $20\%$?

【解】将以上数据代入香农公式，得出：$35000=3100\log_2(1+S/N)$

$\log_{2}(1+S/N)=35000/3100=350/31=\lg(1+S/N)/\lg2$

$\text{lg}(1+S/N)=\lg 2\times350/31$

$S/N=10^{\lg 2\times350/31}-1=2505$

使最大信息传输速率增加 $60\%$ 时，设信噪比 $S/N$ 应增大到 $x$ 倍，则

$35000\times1.6=3100\log_2(1+xS/N)$

$\log_2(1+xS/N)=35000\times1.6/3100=350\times1.6/31$

$\lg(1+xS/N)/\lg2=350\times1.6/31$

$xS/N=10^{\operatorname{lg}2\times350\times1.6/31}-1$

$\!\!\!\!\!\!\begin{array}{l}&x\!\!\!\!&=(10^{\lg2\times339\times1.6/31}-1)/(10^{\lg2\times350/31}-1)=(10^{5.438}-1)/(10^{3.399}-1)\\&&=10^{5.438}/10^{3.399}\\&&=10^{2.039}=109.396\\ \end{array}$

信噪比应增大到约 $100$ 倍。

设在此基础上将信噪比 $S/N$ 再增大到 $10$ 倍，而最大信息传输速率可以再增大到 $y$ 倍，则利用香农公式，得出

$35000\times1.6\times y=3100\:\log_2(1+2505\times109.396\times10)$

$\begin{array}{l}y\!\!\!\!\!\!&=3100\log_2(1+2505\times109.396\times10)/35000\times1.6\\&=(3100\lg2740370.8\ /\lg2)/35000\times1.6=1.184\end{array}$

即最大信息速率只能再增加 $18.4\%$ 左右。

#### 练习与拓展

1.( B ) 传递需要进行调制编码。

A.数字数据在数字信道上        B.**数字数据在模拟信道上**

C.模拟数据在数字信道上        D.模拟数据在模拟信道上

【解析】调制是指数字信号转变为模拟信号，也叫D/A转换。

- 数字数据在数字信道上传输需要将其转变为数字信号，采用相应的数字编码；
- 数字数据在模拟信道上传输需要调制成模拟信号；
- 模拟数据在数字信道上传输时，需要将其通过量化编码转成数字信号；
- 模拟数据在模拟信道上传输时，可以进行调制也可以不进行调制传输。

> ##### **模拟信号与数字信号**
>
> “模拟信号”（analog signal）是“模拟数据”的电平信号表示形式，其信号电平是一个随时间连续变化的（中间没有跳跃）函数曲线（每个周期的曲线是一样的）；
>
> 而“数字信号”（digital signal）是“数字数据”的信号电平表示形式（由一个个“码元”组成，一个“码元”就包括一个脉冲周期），用两种不同的电平表示二进制的 0 和 1 信号所对应的电压脉冲，是离散（非连续变化）的。

2.利用模拟通信信道传输数据信号的方法称为 ( D ) 。

A.同步传输    B.基带传输    C.异步传输    D.**频带传输**

> ##### 基带、频带与宽带
>
> 信源信号（也就是信号源发送的信号）经过信源编码之后成为离散的二进制数字信号。我们用一些离散的波形来代替这些数字信号。这些离散的信号可以直接进行传输，或者调制到载波上进行传输。这样就形成了两种最基本的数字信号的传输类型——基带传输和频带传输。在频带传输基础上，通过信道的复用又诞生了一种称为宽带传输的数据传输类型。
>
> 基带是指信源发出的，没有经过调制（进行频谱搬移和变换）的原始电信号所固有的频带（频率带宽），也称为基本频带。
>
> 而频带是指**对基带信号调制后**所占用的频率带宽（一个信号所占有的从最高的频率到最低的频率之差）。
>
> 所谓“宽带”（Broadband）就是采用比音频（4kHz）更宽的频带，该频带包括了大部分电磁波频谱，是相对前面的“频带”来说的，因为“频带”只具有有限的频率宽度。使用这种宽频带进行的数据传输就称为宽带传输。宽带传输其实与频带传输具有相同的特点，它也需要对信源发出的原始信号进行调制，但它将一个信道分成多个子信道，分别传送音频、视频和数字信号，而且宽带传输中的所有子信道都可以同时发送信号。
>
> > ————————————————
> > 版权声明：本文为CSDN博主「hongdi」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
> > 原文链接：https://blog.csdn.net/hongdi/article/details/113991912

---

3.单位时间内所传送的**二进制信息**的位数称为（ B ）

A.信号传输率      B.**数据传输率**      C.信号传播率      D.误码率

4.**波特率**等于（ B )

A.每秒传输的比特           B.**每秒钟传输的数据位数**

C.每秒传输的周期数       D.每秒传输的字节数

> **1. 数据传输速率**
>
> 又称**码率、比特率或数据带宽**，描述通信中每秒传送数据代码的比特数，单位是bps。这个很好理解，是“刚需”，每秒传多少bit的数据。
>
> **2. 码元（符号）**
>
> ......通过不同的调制方式（诸如FSK、QAM等等），可以在一个码元符号上负载多个bit位信息。举个例子，下图是4QAM（即QPSK）调制的全部四种码元符号，一种符号可以带两个bit的信息。$4=2^2$
>
> ![](assets/02lianxi01.png)
>
> **3. 符号率**
>
> 符号率也就是**码元速率**，单位是Baud/s或sym/s，表示每秒传输码元符号的数目。符号率也叫**波特率**或符码率。符号率决定了通信效率，显然一种调制方式符号状态数（上例中4QAM是4种）越多，符号率数值越大，每秒可以传更多的bit信息。显然有
>
> 数据传输速率 = 符号率 $\times$ 一种符号所带的bit数
>
> > ————————————————
> > 版权声明：本文为CSDN博主「guangod」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
> > 原文链接：https://blog.csdn.net/guangod/article/details/104913751

【结论】

<u>比特率 = 波特率 × $log_2$符号状态数（或称进制数）</u>

<u>数据传输(速)率=比特率，信号传输(速)率=波特率</u>

波特率：单位时间内传送<u>二进制数据/码元符号/波形</u>的位数。

比特率：单位时间内传送<u>二进制数据位/二进制代码/二进制信息</u>的位数。

---

5.调制解调器的作用是（ A ）。

A.**把计算机信号和模拟信号<u>相互</u>转换**              B.把计算机信号转换为模拟信号

C.把模拟信号转换为计算机信号                      D.防止外部病毒进入计算机中

> 调制解调器是Modulator（调制器）与Demodulator（解调器）的简称，中文称为调制解调器，根据Modem的谐音，亲昵地称之为“猫”，是一种能够实现通信所需的**调制和解调功能**的电子设备。一般由调制器和解调器组成。

---

6.如果电缆调制解调器使用 8MHz 的频带宽度，那么在利用 64QAM（正交幅度调制）时，它可以提供的速度为（  48MB/s  ）。

> CABLE MODEM 使用的是一种称为 QAM (Quadrature Amplitude Modulation，正交幅度调制) 的传输方式。QAM 前面的数字代表在转换群组 (所谓转换群组，就是相位及振幅的特殊组合) 中的点数。也就是值或等级。
>
> > 作者：拜德英纳夫 https://www.bilibili.com/read/cv2498712/ 出处：bilibili

<u>计算公式为：速度 $=\log_2$QAM 值 $\times$ 频带宽度。</u>

根据此公式计算速率为 $\log_2 64 \times 8\,\textrm{MHz}=48\text{Mbps}$。

> 等到 QAM 调制方式的时候，由于要描述的状态多了，只靠相位区分状态就不够了（相互区别起来有些困难了），需要加入幅度的变化来表示一个状态...... 所以说对接收机的要求比较高了。16QAM 就是状态空间为 16，每个状态是 4 个比特的信息；**而 64QAM 的状态空间是 64，每个状态是 6 个比特的信息。**
>
> > ————————————————
> > 版权声明：本文为CSDN博主「phymat.nico」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
> > 原文链接：https://blog.csdn.net/shixin_0125/article/details/113448711

例题 1：在无噪声的情况下，若某通信链路的带宽为 3kHz，采用 4 个相位，每个相位具有 4 中振幅的 QAM 调制技术，则该通信链路的最大数据传输率是多少？

解答：采用4个相位，每个相位具有4种振幅的QAM调制技术，则有16种不同的组合，则1个码元可携带4bit信息量，根据奈氏准则：**最高信息传输速率=2W Baud=2×3kHz=6000Baud=6000码元/s×4bit/码元=24000b/s**

> > ————————————————
> > 版权声明：本文为CSDN博主「白芷加茯苓」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
> > 原文链接：https://blog.csdn.net/qq_43627631/article/details/111240359

<div class="cover" style="page-break-after:always;"> </div>

### 物理层下面的传输介质

> 传输媒体也称为传输介质或传输媒介，它就是数据传输系统中在发送器和接收器之间的物理通路。传输媒体可分为两大类，即导引型传输媒体和非导引型传输媒体（这里的“导引型”的英文就是 guided，也可译为“导向传输媒体”)。

- 有线介质（导引型）：

  在有线（导引型）传输介质中，电磁波被导引沿着固体媒体（铜线或光纤） 传播。常见的介质有双绞线、同轴电缆、光纤。

- 无线介质（非导引型）：

  无线（非导引型）传输介质就是指自由空间。在非导引型传输媒体中，电磁波的传输常称为无线传输。包括长波、中波、短波、微波和红外线。

#### 双绞线

分为非屏蔽双绞线 UTP、屏蔽双绞线 STP (Shielded Twisted Pair，带金属屏蔽层) 

RJ45 Pinout 有 T-568A、T-568B 两种线序，B 最常见。

直通缆：一根网线两段都有水晶头，都使用 T-568B；交叉缆：一端使用 A，另一端用 B。

目前基本使用超 5 类线、7 类线。区别主要为工艺、是否有屏蔽装置。到了 7 类线，支持的带宽越来越高。

#### 同轴电缆

![](assets/02020201.png)

#### 光纤

![](assets/02020301.png)

| **单模光纤（上图右下）** | **多模光纤（上图右上）** |
| ---------------------- | ---------------------------------------------- |
| 传输距离不低于2km      | 传输距离不大于2km                              |
| 采用激光光源           | 采用 LED 光源 |
| 带宽和成本高、黄色护套 | 带宽和成本低、橙色护套 |
| 通过绕射实现，效率更高 | 利用反射原理 |

优点：
(1) 传输损耗小，中继距离长，对远距离传输特别经济。
(2) 抗雷电和电磁干扰性能好。这在有大电流脉冲干扰的环境下尤为重要。
(3) 无串音干扰，保密性好，不易被窃听或截取数据。
(4) 体积小，重量轻。这在现有电缆管道已拥塞不堪的情况下特别有利。

#### 无线介质

| **长波、中波、短波**                       | **微波**                                   | **红外线、激光**                             |
| ------------------------------------------ | ------------------------------------------ | -------------------------------------------- |
| 穿透和绕射力强<br/>远距离通信<br/>速率较低 | 穿透和绕射力弱<br/>视距中继传输<br/>速率高 | 穿透性差<br/>短距离通信<br/>无需授权分配频率 |

### 电路交换、报文交换、分组交换

#### 特点

![](assets/020301.png)

- **电路交换**——整个报文的比特流连续地从源点直达终点，好像在一个管道中传送。
- **报文交换**——整个报文先传送到相邻节点，全部存储下来后查找转发表转发到下一节点。
- **分组交换**——单个分组传送到相邻节点，存储下来后查找转发表，转发到下一个节点。

##### 电路交换（circuit switching）

经过建立连接(占用通信资源)—通话(一直占用通信资源)—释放连接(归还通信资源)三个步骤的交换方式成为电路交换。

通信双方建立一条**被双方独占**的通路，<u>在两台设备进行通话的整个过程中，通话的两个用户始终占用端到端的通信资源</u>。整个报文的比特流连续地从源点直达终点。**线路的传输效率往往很低。**

在电路交换网络中，在端系统间通信会话期间，**预留**了端系统间沿路径通信所需要的**资源**（缓存，链路传输速率）。

##### 报文交换

报文交换中数据传输的**最小单位**就是**报文（message）**，报文是站点一次性所发送的**完整**的数据块，其**长度不限且可变**。

报文交换采用**存储转发（store-and-forward transmission）**的传输方式，将目的地址附加到报文，每个节点在收到整个报文并检查无误后（**需要确认**），就暂存这个报文，然后根据所附加的地址，利用路由信息找出下一个节点的地址，再把整个报文传送给下一个节点，故**发送、接收两端之间无需连接**。注意，**整个报文**先传送到相邻结点，**全部存储下来**之后查找转发表，转发到下一个结点。

##### 分组交换（packet switching）

**基于报文交换**，将报文划分为更小的数据单位：报文**分组**（也称为包、段、分组，packet）。每个分组的长度有一个**固定的上限**。各分组被**连续发送**，逐个传输，可以使后一个分组的存储操作与前一个分组的转发操作并行，如同流水线。分组的**首部**也可称为“包头”，包含了诸如目的地址和源地址等**重要控制信息**，使每一个分组能在互联网中独立地选择传输路径，并被正确地交付到分组传输的终点。

分组交换同样采用**存储转发**方式，从源端系统向目的端系统发送一个报文，源将长报文划分为较小的分组。在源和目的地之间，每个分组都通过通信链路和分组交换机（packet switch）传送。

> 交换机主要有两类：路由器（router）和链路层交换机（link-layer switch）。

> 存储转发传输是指在交换机能够开始向输出链路传输该分组的第一个比特之前，必须接收到整个分组。......源已经传输了分组 1 的一部分，分组 1 的前沿已经到达了路由器。因为该路由器应用了存储转发机制，所以此时它还不能传输已经接收的比特，而是必须先缓存（即“存储“）该分组的比特。仅当路由器已经接收完了该分组的所有比特后，它才能开始向出链路传输（即”转发“）该分组。

分组交换技术使用**统计复用**，与电路交换相比大大提高了带宽利用率。

#### 优缺点

##### 电路交换：

- 优点：

时延短。数据是直达的，通信的线路为用户双方专用；

**实时性强**。通信的双方之间有专用的信道，建立后双方可以随时通信；

不会出现失序的问题。通信的双方按发送的顺序来传送数据；

既能传输模拟信号也能传输数字信号，能将数据很好的进行数模或模数转换；

电路交换设备和控制都比较简单。

- 缺点：

**线路的传输效率往往很低**。由于占用专有的信道，即使信道空闲也不能为其他人所服务；

由于数据的类型、规格、速率各不相同，其数据交互通信中就难以避免出现差错；

计算机交换数据的速度比电路速度快出了很多倍，因此出现通信滞后的现象；

会受到协议的约束；

在短时间数据传输时电路建立和拆除所用的时间得不偿失。

##### 报文交换：

- 优点：

报文交换不需要预先建立一条专用通信线路，用户可随时发送报文；

报文交换有着较高的信道利用率。通信双方不是固定占有一条通信线路，而是在不同的时间一段一段地部分占有这条物理通路；

报文交换网络可实现速度、代码的转换，便于类型、规格和速度不同的计算机之间进行通信；

提供多目标服务，即一个报文可以同时发送到多个目的地址；

允许建立数据传输的优先级，使优先级高的报文优先转换。

- 缺点：

实时性差，延迟时间长且不定。由于数据进入交换结点后要经历存储、转发这一过程，从而引起转发时延（包括接收报文、检验正确性、排队、发送时间等），而且网络的通信量愈大，造成的时延就愈大；

由于报文长度没有限制，而每个中间结点都要完整地接收传来的整个报文，要求网络中每个结点有较大的缓冲区。为了降低成本，减少结点的缓冲存储器的容量，有时要把等待转发的报文存在磁盘上，进一步增加了传送时延。

报文交换只适用于数字信号；

有时节点收到过多的数据而无空间存储或不能及时转发时，就不得不丢弃报文，而且发出的报文不按顺序到达目的地；

相关设备费用高。

##### 分组交换：

- 优点：

1.高效：在分组传输的过程中动态分配传输带宽，对通信链路是逐段占用。

2.灵活：为每一个分组独立地选择最合适的转发路由。

3.迅速：以分组作为传送单位，可以不先建立连接就能向其他主机发送分组。

4.可靠：保证可靠性的网络协议；分布式多路由的分组交换网，使网络有很好的生存性。

- 缺点：

1.分组在各结点存储转发时需要排队，这就会造成一定的时延

2.分组必须携带的首部（里面有必不可少的控制信息）也造成了一定的开销。

#### 区别

##### 电路交换相比于报文交换和分组交换

不使用后两者所用的存储转发的传输方式。

报文交换和分组交换的信道利用率优于电路交换。

通信线路为通信双方用户专用，时延相比后两者非常小。且后两者提供多目标服务。

电路交换既适用于传输模拟信号，也适用于传输数字信号；而后两者只适用于数字信号。

报文交换和分组交换不需要预先分配带宽，在传送突发数据时可提高整个网络的信道利用率。

分组交换不适合实时服务（例如电话和视频会议），因为它的端到端时延是可变的、不可预测的。但分组交换提供了比电路交换更好的带宽共享，它比电路交换更简单、有效，实现成本更低。

若要传送的数据量很大，且其传送时间远大于呼叫时间，则采用电路交换较为合适；当端到端的通路有很多段的链路组成时，采用分组交换传送数据较为合适。

电路交换中，不同终端很难相互进行通信，容错率较后两者低。

##### 报文交换与分组交换

分组交换所传输的数据的最小单位比报文交换小，且分组的长度有一个固定不变的上限，而报文长度不限且可变。报文交换每次传输的是完整的报文，分组交换不传输完整报文。

- 传输一个分组所需的缓冲区比传输一份报文所需的缓冲区小得多，这样因缓冲区不足而等待发送的机率及等待的时间也必然少得多；

- 分组的长度固定，相应的缓冲区的大小也固定，在交换结点中存储器的管理通常被简化为对缓冲区的管理，相对比较容易；

- 分组较短，出错率少，容错率比报文交换高，且每次重发的数据量大大减少；

- 分组交换相对于报文交换会产生额外开销，因为要进行数据的拆分和重组。

报文交换在节点之间的数据传递不连续，而分组交换如同流水线，数据连续传递，减少了报文的传输时间。

报文交换中，网络的通信量愈大，造成的时延就愈大。而分组交换比报文交换的传输时延少，但仍存在存储转发时延。

分组交换使用统计多路复用。

##### 数据传输时延

电路交换：通信线路为通信双方用户专用，数据直达，传输数据的时延非常小。

报文交换：网络的通信量越大，造成的时延就越大。

分组交换：分组交换比报文交换的传输时延少，但仍存在存储转发时延。

##### 实时性

电路交换：通信双方之间的物理通路一旦建立，可随时通信。

报文交换：不需要预先建立一条专用的通信线路，可随时发送报文。

分组交换：不需要预先建立一条专用的通信线路，可随时发送报文。同时分组短小，便于及时传送一些紧急数据，更适合采用优先级策略。

### 多路复用（Multiplexing）

复用允许用户使用一个共享信道进行通信，降低成本，提高利用率。

时分复用（Time Division Multiplexing，TDM）：将提供给整个信道传输信息的时间划分成若干时间片 (简称时隙，slot)，并将这些时隙分配给每一个信号源使用。

频分复用（Frequency Division Multiplexing，FDM）：将用于传输信道的总带宽划分成若干个子频带 (或称子信道、频点)，每一个子信道分配给每一个信号源使用。

码分复用（Code Division Multiplexing，CDM）：用一组包含互相正交的码字的码组携带多路信号。

![](assets/020400.png)

#### 时分复用

>对于一条 TDM 链路，时间被划分为固定期间的帧，并且每个帧又被划分为固定数量的时隙。当网络跨越一条链路创建一条连接时，网络在每个帧中为该连接指定一个时隙，这些时隙专门由该连接单独使用，一个时隙（在每个帧内）可用于传输该连接的数据。  （见上图）

同步时分复用：时间片预先分配好且固定不变，因此各种信号源的传输定时是同步的。

缺点：当某用户暂时无数据发送时，在分配给自己的时隙上信道是空闲的，参与复用的其它用户也无法使用这个暂时空闲的线路资源，因此时分复用系统的利用率不高。

![](assets/0204TDM02.gif)

异步时分复用（Statistical TDM，STDM）：又称智能时分复用或统计时分复用，集中器 （concentrator）常使用这种统计时分复用。它对用户采用动态“按需分配”时隙策略。复用器收下所有数据并封到一帧中，完整地发送出去。

缺点：发送信息过多，使缓冲区过满，造成信息丢失；时隙中包含不同节点发送的信息，信息中必须增加地址信息。

![](assets/0204STDM.png)

> 统计时分复用使用 STDM 帧来传送复用的数据。但每一个 STDM 帧中的时隙数小于连接在集中器上的用户数。<u>各用户有了数据就随时发往集中器的输入缓存，然后集中器按顺序依次扫描输入缓存，把缓存中的输入数据放入 STDM 帧中。对没有数据的缓存就跳过去。</u>当一个帧的数据放满了，就发送出去。可以看出，STDM 帧不是固定分配时隙，而是按需动态地分配时隙。因此，统计时分复用可以提高线路的利用率。我们还可看出，在输出线路上，某一个用户所占用的时隙并不是周期性地出现的。因此，统计时分复用又称为异步时分复用，而普通的时分复用称为同步时分复用。这里应注意的是，虽然统计时分复用的输出线路上的数据率小于各输入线路数据率的总和，但从平均的角度来看，这二者是平衡的。<u>假定所有的用户都不间断地向集中器发送数据，那么集中器肯定无法应付，它内部设置的缓存都将溢出，所以集中器能够正常工作的前提是假定各用户都是间歇地工作的。</u>

> <u>由于 STDM 帧中的时隙并不是固定地分配给某个用户的，因此在每个时隙中还必须有用户的地址信息，这是统计时分复用必须有的和不可避免的一些开销。</u>图 2-18 中输出线路上每个时隙之前的短时隙（白色）就用于放入这样的地址信息。使用统计时分复用的集中器也叫作**智能复用器**，它能提供对整个报文的存储转发能力（但大多数复用器一次只能存储一个字符或一个比特），通过排队方式使各用户更合理地共享信道。此外，许多集中器还可能具有路由选择、数据压缩、前向纠错等功能。

负载高用同步，负载低用异步。

#### 频分复用

若干个频谱互不重叠的信号一并传输的方式。在每路信号进入传输频带前，先要依次搬移频率（调制），而在接收端，再搬回到原来频段，恢复每路的信号。

波分复用 WDM (Wavelength Division Multiplexing)：即光的频分复用，是频分复用的特例。在同一根光纤中同时让两个或两个以上的光波长信号通过不同光信道各自传输信息。

#### 码分复用

亦称为码分多址（CDMA）。各用户使用经过特殊挑选的不同码型，因此彼此不会造成干扰。有很强的抗干扰能力，其频谱类似于白噪声，不易被敌人发现。

每一个比特时间划分为 m 个短的间隔，称为码片 (chip)。每个站被指派一个唯一的 m bit 码片序列 (chip sequence) 各用户使用。若发送比特 1，则发送自己的 m bit 码片序列。若发送 0，则发送该码片序列的二进制反码。

例如，S 站的 8 bit 码片序列是 00011011。发送比特 1 时，就发送序列 0001101，发送比特 0 时，就发送序列 11100100。按照惯例，将 0 记做 -1。则 S 站的码片序列为：
$(-1\ -1\ -1\ +1 \ +1\ -1\  +1\  +1)$。

令向量 $\boldsymbol{S}$ 表示站 S 的码片向量，再令 $\boldsymbol{T}$ 表示其他任何站的码片向量。两个不同站的码片序列正交 (orthogonal)，就是向量 $\boldsymbol{S}$ 和 $\boldsymbol{T}$ 的规格化内积 (inner product) 等于 $0$。任何一个码片向量和该码片向量自己的规格化内积都是 $1$，和该码片反码的向量的规格化内积值是 $-1$。
$$
\boldsymbol{S}\cdot \boldsymbol{T}=\frac{1}{m}\sum\limits^{m}_{i=1}S_{i}T_{i}=0\quad\:
\boldsymbol{S}\cdot \boldsymbol{S}=\frac{1}{m}\sum\limits^{m}_{i=1}S_{i}S_{i}=1\quad\:
\boldsymbol{S}\cdot \boldsymbol{S_{反}}=-\frac{1}{m}\sum\limits^{m}_{i=1}S_{i}S_{i}=-1
$$
推导可得，① $\boldsymbol{S}$ 与 $\boldsymbol{T}$ 正交；②“ $\boldsymbol{S}$ 的反码” 与 $\boldsymbol{T}$ 正交；③ $\boldsymbol{S}$ 与“ $\boldsymbol{T}$ 的反码”正交；④“$\boldsymbol{S}$ 的反码”与“ $\boldsymbol{T}$ 的反码” 正交。

$$
\boldsymbol{S}\cdot\boldsymbol{T}=\boldsymbol{S_{反}}\cdot\boldsymbol{T}=\boldsymbol{S}\cdot\boldsymbol{T_{反}}=\boldsymbol{S_{反}}\cdot\boldsymbol{T_{反}}=0=\boldsymbol{S}\cdot\boldsymbol{T_{x}}\qquad\boldsymbol{T_{x}}\cases{\boldsymbol{T} \\ \boldsymbol{T_{反}}}
$$
接收方收到的信号实际上是 $\boldsymbol{S_{x}}+\boldsymbol{T_{x}}$，若接收方想接收 S 站的信号，则将 S 站的码片向量 $\boldsymbol{S}$ 与接收信号向量 $\boldsymbol{S_{x}}+\boldsymbol{T_{x}}$ 进行规格化内积，则有 $\boldsymbol{S}\cdot (\boldsymbol{S_{x}}+\boldsymbol{T_{x}})=\boldsymbol{S}\cdot\boldsymbol{S_{x}}+\boldsymbol{S}\cdot\boldsymbol{T_{x}}=\boldsymbol{S}\cdot\boldsymbol{S_{x}}$，因此当 $\boldsymbol{S_x}=\boldsymbol{S}$ 时，内积为 $1$；当 $\boldsymbol{S_x}=\boldsymbol{S_{反}}$ 时，内积为 $0$ 。

![](assets/0204CDMA01.png)

>......在上图中 “ $\boldsymbol{S}\cdot\boldsymbol{T_{x}}$ ” 对应的那条信号不太像是 “ $\boldsymbol{S}\cdot\boldsymbol{T_{x}}=0$ ” 的意思呢？
>
>这里，我们数数，在一个区间内，那条信号的 0、1 相加为多少？不就是 1 + 1 - 1 - 1 + 1 - 1 + 1 - 1 = 0 嘛。所以说 “ $\boldsymbol{S}\cdot\boldsymbol{T_{x}}=0$ ” 是这样子体现的。
>
>最后，有一个拓展问题：假如有 100 个站点，则码片序列至少要多少位？
>
>从简单入手，如果有 2 个站点，那么需要 “0、1” 这两个码片行吗？ 显然不行，起码用 “01、00” 或 “01、11” 这两个码片。$m$ 位的码片能表示 $2^m$ 种码片，况且某一个站使用了码片 A，那连它的补码也要算给这个站的。所以 100 个站点至少需要 8 位的码片甚至更多( $2^8=256$ ) 。
>
>> ————————————————
>> 版权声明：本文为CSDN博主「一支王同学」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
>> 原文链接：https://blog.csdn.net/Wang_Dou_Dou_/article/details/123481009

---

> 总结：
>
> **频分复用** 指：在信道中按频率划分不同的子信道，每个子信道占用不同的频率范围，**同时**传输多路信号，每路信号占用**部分**带宽，信号是以 0、1 的形式传输。
>
> **时分复用** 指：每个 **终端** 在一个时间周期内，以 “分时间片” 的形式来传输信号，**分时**传输多路信号，每路信号占用**全部**带宽，信号是以 0、1 的形式传输。
>
> **码分复用** 指：每个 **终端** 在一个时间周期内，以 “分码片” 的形式来传输信号，**同时**传输多路信号，每路信号占用**全部**带宽，信号是以 “码片”、“码片的补码” 的形式传输。
>
> > ————————————————
> > 版权声明：本文为CSDN博主「一支王同学」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
> > 原文链接：https://blog.csdn.net/Wang_Dou_Dou_/article/details/123481009

对于模拟信号，可以将 TDM 和 FDM 组合起来使用。

### 2.2-4 练习与拓展

1.传输介质是网络中收发双方之间的物理通路。下列传输介质中．具有很高的数据传输速率、信号传输衰减最小、抗干扰能力最强的是（ D ）。

A.电话线          B.同轴电缆          C.双纹线          D.**光缆**

2.下面关于光纤的叙述，不正确的是（ D ）

A.频带很宽      B.误码率很低      C.不受电磁干扰      D.容易维护和维修

【总结】光纤相关：

优点：数据传输速率最高、频带宽、信号传输衰减最小，误码率低、抗干扰能力最强

缺点：不易维护和维修

光传输系统由三部分组成：光源（光发送机），传输介质、检测器（光接收机）。

---

3.下列双绞线的叙述，不正确的是（ C ）

A.它既可以传送模拟信号，也可以传送数字信号

B.安装方便，价格较低

C.不易受外部干扰，误码率较低

D.通常只用作建筑物内局域网的通信介质

> 在电话系统中使用的双绞线，其通信距离一般为几公里。如果使用较粗的导线，则传输距离也可以达到十几公里。距离太长时就要加放大器以便将衰减了的信号放大到合适的数值（对于**模拟传输**)，或者加上中继器以便对失真了的数字信号进行整形（对于**数字传输**)。导线越粗，其通信距离就越远，但价格也越高。

> 在局域网发展的初期曾广泛地使用同轴电缆作为传输媒体。但随着技术的进步，在**局域网**领域基本上都采用**双绞线**作为传输媒体。目前同轴电缆主要用在有线电视网的居民小区中。
>

【总结】双绞线相关：

优点：安装方便，扩展灵活，价格较低；既可以传送模拟信号，也可以传送数字信号

缺点：易受外部干扰，误码率较高

双绞线由两根具有绝缘保护层的铜导线按一定密度绞合构成，这样可降低信号干扰的程度。

目前双绞线价格低，所以经常使用。

---

![](assets/02lianxi02.png)

本题存在一个偷鸡的点，即接收到的信号中最大值是 3，且有两个 3 同号，A、B、D 在这两个 3 所在位置的两个数同号，B 又是+1，所以 A、D 发送了 +1，B 发送了 -1。

## 第三章  数据链路层

### 数据链路层基本功能

#### 封装成帧（Framing）

为网络层传下来的报文添加首部和尾部，用于标记帧的开始和结束。

1. 字符计数法

![](assets/030101.png)

帧开头的第一个字符表示该帧包含几个字符（上图），可能出现差错（下图）。

2. 特殊字符界定法。

![](assets/030102.png)

在 FLAG 前添加特殊字符（ESC）来避免控制字符出现在数据当中。

> 前面提到的“透明”是一个很重要的术语。......“在数据链路层透明传送数据”表示无论什么样的比特组合的数据，都能够按照原样没有差错地通过这个数据链路层。因此，对所传送的数据来说，这些数据就“看不见”数据链路层有什么妨碍数据传输的东西。或者说，数据链路层对这些数据来说是透明的。
> 
> 为了解决**透明传输**问题，就必须设法使数据中可能出现的控制字符“SOH”和“EOT”在接收端不被解释为控制字符。具体的方法是：发送端的数据链路层在数据中出现控制字符“SOH”或“EOT”的前面插入一个转义字符“ESC”(其十六进制编码是 1B，二进制是 00011011)。而在接收端的数据链路层在把数据送往网络层之前删除这个插入的转义字符。这种方法称为字节填充 (byte stuffing) 或字符填充 (character stuffing)。如果转义字符也出现在数据当中，那么解决方法仍然是在转义字符的前面插入一个转义字符。

3. 特殊位串界定法

假设界定符是 01111110，两个 0 中间夹着六个 1，当正文中也出现这一序列时，则在正文中每连续五个 1 强制填充一个 0，接收端再强制将这个 0 去掉。

4. 物理层编码违例法

引入没有特定含义的波形作为帧开始或结束的标志。

---

上述四种编码方法一般都是要结合使用，最经典的成帧方法是 特殊位串界定法 + 字符计数法。

#### 差错控制

具备发现差错的能力，使差错被控制在所能允许的尽可能小的范围内。(检错+纠错)

##### 检错码

目前在数据链路层广泛使用**循环冗余检验**（Cyclic Redundancy Check，CRC）的检错技术。

把余数 $R$ 作为冗余码添加在数据 $M$ 的后面发送出去。接收方用同一除数 $P$ 去除接收到的数据，若能除尽表示传输过程中没有差错。加上确认和重传机制实现可靠传输。

> 在发送端，先把数据划分为组，假定每组 $k$ 个比特。现假定待传送的数据 $M=101001$ $(k = 6)$ 。CRC 运算就是在数据 $M$ 的后面添加供差错检测用的 $n$ 位**冗余码**，然后构成一个帧发送出去，一共发送 $(k+ n)$ 位。在所要发送的数据后面增加 $n$ 位的冗余码，虽然增大了数据传输的开销，但却可以进行差错检测。......
>
> 这 $n$ 位冗余码可用以下方法得出。用二进制的**模 2 运算**进行 $2^n$ 乘 $M$ 的运算，这相当于在 $M$ 后面添加 $n$ 个 $0$。得到的 $(k + n)$ 位的数**除以**收发双方事先商定的长度为 $(n+ 1)$ 位的除数 $P$，得出商是 $O$ 而余数是 $R$（$n$ 位，比 $P$ 少一位）。
>
> 在图 3-8 所示的例子中 *（下图）*，$M = 101001$ (即 $k =6$)。假定除数 $P=1101$ (即 $n = 3$)。经模 $2$ 除法运算后的结果是：商 $Q=110101$ (这个商并没有什么用处)，而余数 $R =001$。这个余数 $R$ 就作为冗余码拼接在数据 $M$ 的后面发送出去。这种为了进行检错而添加的冗余码常称为帧检验序列 FCS (Frame Check Sequence)。因此加上 FCS 后发送的帧是 $101001001$（即 $2^{n}M＋ FCS$），共有 $(k+n)$ 位。

![](assets/0301CRC01.png)

![](assets/0301CRC02.png)

![](assets/0301CRC03.png)

$p.s.\;$ 模 $2$ 运算：

1. 模 $2$ 加法：不带进位的二进制加法，等同于“异或”运算；
2. 模 $2$ 减法：不带借位的二进制减法；
3. 模 $2$ 乘法：多位数乘一位数和普通二进制乘法一样，在累加时遵循模 $2$ 加法；
4. **模 $2$ 除法**：除数首位总是 $1$，再进行模 $2$ 减法，并使余数位数与除数位数相同，得到的余数首位是 $1$ 就商 $1$，是 $0$ 就商 $0$。（基础方法，下左）

在上面的基础上，不保留余数的最高位的 $0$，若余数位数小于除数位数，则在余数和商 $Q$ 后面补 $0$，直到余数位数与除数位数相同时，余数补 $0$，商补 $1$。（简化方法，下右，上方截图也是）

$$
\require{enclose}
\begin{array}{rll}
    1011 && \hbox{(Q)} \\[-2pt]
   (P)\;1101\, \enclose{longdiv}{1111000}\kern-.2ex &&\hbox{(除数$P$有$4$位)}\\[-2pt]
      \underline{1101\phantom{000}} \kern.2ex && \hbox{(进行模2减法)}\\[-2pt]
      0100\phantom{00} && \hbox{(余数，保留4位)} \\[-2pt]
      \underline{0000\phantom{00}} && \hbox{(这一步可简化)} \\[-2pt]
       1000 \phantom{0} && \hbox{(余数，保留4位)} \\[-2pt]
      \underline{1101 \phantom{0}}  \\[-2pt]
      1010 && \hbox{(余数，保留4位)} \\[-2pt]
      \underline{1101}\\[-2pt]
      111 && \hbox{(最终余数$R$)}
  \end{array}
  \qquad
  \begin{array}{rll}
    1\fbox{\!01\!}1 && \hbox{(Q)} \\[-2pt]
   1101\, \enclose{longdiv}{1111000}\kern-.2ex &&\hbox{(除数$P$有$4$位)}\\[-2pt]
      \underline{1101\phantom{000}} \kern.2ex \\[-2pt]
  10\fbox{\!00\!}\phantom{0} && \hbox{(高位0舍去，右补0)} \\[-2pt]
      \underline{1101 \phantom{0}}  \\[-2pt]
      1010 && \hbox{(余数，保留4位)} \\[-2pt]
      \underline{1101}\\[-2pt]
      111 && \hbox{(最终余数$R$)}\\[-2pt]
      \\[-2pt]
      \\[-2pt]
  \end{array}
$$

【例 1】发送准备发送的信息位为 $1101011011$，采用 CRC 校验算法，生成多项式是 $G(x)=x^4+x+1$，那么发出的校验位应该是（ 1110 ）。

**解：**$P=10011,\ \ n=4,\ \ M=1101011011\fbox{0000}$，求余数 $R$ 。见下左

$$
\require{enclose}
\begin{array}{rll}
   \textbf{Example 1:}\phantom{10011000000} 1100001010 \\[-2pt]
   10011\, \enclose{longdiv}{1101011011\fbox{\!0000\!}}\kern-.8ex \\[-2pt]
      \underline{10011\phantom{000000000}} \kern.1ex \\[-2pt]
      10011\phantom{00000000}\\[-2pt]
      \underline{10011\phantom{00000000}} \\[-2pt]
       10110 \phantom{000}  \\[-2pt]
      \underline{10011 \phantom{000}}  \\[-2pt]
      10100 \phantom{0} \\[-2pt]
      \underline{10011\phantom{0}}\\[-2pt]
      1110 
  \end{array}
  \qquad\qquad
  \begin{array}{rll}
     \textbf{Example 2:}\phantom{10011000000} 1101010 \\[-2pt]
   11001\, \enclose{longdiv}{1011001\fbox{\!0000\!}}\kern-.8ex \\[-2pt]
      \underline{11001\phantom{000000}} \kern.1ex \\[-2pt]
      11110\phantom{00000}\\[-2pt]
      \underline{11001\phantom{00000}} \\[-2pt]
       11110 \phantom{000}  \\[-2pt]
      \underline{11001 \phantom{000}}  \\[-2pt]
       11100 \phantom{0}  \\[-2pt]
      \underline{11001 \phantom{0}}  \\[-2pt]
      1010
  \end{array}
$$

【例 2】在数据传输过程中，如果接收方接收到的信息位为 $10110011010$，采用 CRC 校验算法，生成多项式是 $G(x)=x^4+x^3+1$，则表明（ 该比特序列在传输过程中没有发生差错 ）。

**解：**$P=11001,\ \ n=4,\ \ M=1011001\fbox{\!0000\!},\ \ R=1010$，检验余数是否 $=R$ 。见上右

##### 纠错码

最经典的是海明码（汉明码，Hamming Code）。

用多个比特表示一个比特，传 111 代表 1，传 000 代表 0。若传输中出现错误，接收到 011、101 或 110，我们近似地认为传递的是 111（即 1），否则认为是 000。

![](assets/0301hamming01.png)
> **检错** $d$ 位需要码距为 $d+1$ 的编码方案；**纠错** $d$ 位需要码距为 $2d+1$ 的编码方案。
>
> 海明码的编码规则：如果有 $n$ 个数据位和 $k$ 个**冗余校验位**，则必有 $2^k-1\geqslant k+n$ 。
>
> > ————————————————
> > 版权声明：本文为 CSDN 博主「大多数的沉默|」的原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接及本声明。
> > 原文链接： https://blog.csdn.net/xun08042/article/details/121056181


#### 流量控制

用于确保实体发送的数据不会覆盖接受实体已接收的数据。

即，流量控制实际上是对**发送方**的数据流量的控制，是为防止**接收方**缓冲区溢出所需要的。

可以使用滑动窗口协议来实现。见传输层。

#### 链路管理

在两个网络实体之间提供数据链路连接的创建、维持和释放管理。

#### 练习与拓展

1.在数据链路层，网络互联表现为（B）。

A.在电缆段之间复制比特流		**B.在网段之间转发数据帧**

C.在网络之间转发报文				D.连接不同体系结构的网络

---

2.对于**信道比较可靠**并且对通信**实时性要求高**的网络，采用（A）数据链路层服务比较合适。

**A. 无确认的无连接服务**			  	B. 有确认的无连接服务

C. 有确认的面向连接的服务			D. 无确认的面向连接的服务

> 无确认的无连接服务是指源机器向目标机器发送独立的帧，目标机器并不对这些帧进行确认。事先并不建立逻辑连接，事后也不用释放逻辑连接。若由于线路上有噪声而造成了某一帧丢失，则数据链路层并不会检测这样的丢帧现象，也不会回复。当误码率很低时，这类服务是非常适合的，这时回复过程可以留给上面的各层来完成。这类服务对于实时通信也是非常适合的，因为实时通信中数据的迟到比数据损坏更加不好。
>
> > ————————————————
> > 版权声明：本文为CSDN博主「大多数的沉默|」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
> > 原文链接：https://blog.csdn.net/xun08042/article/details/121056181

### PPP协议

#### 链路类型（Link Type）

- 广播链路：使用一对多的广播通信方式，表现为总线型拓扑结构，因此过程比较复杂。广播信道上连接的主机很多，因此必须使用专用的共享信道协议来协调这些主机的数据发送。常用于局域网通信。相关协议为MAC协议。
- 点到点链路：使用一对一的点对点通信方式。协议相对简单。使用最广的协议：PPP协议

#### 协议组成/功能

1. 成帧方法：

   将 IP 数据封装至串行链路，毫无岐义地确定帧边界，并支持帧的错误检测。

2. 链路控制协议 LCP (Link Control Protocol)：

   启动、检测、关闭线路，**协商链路参数**，支持同步和异步线路。

   亦即在链路建立阶段协商**数据链路层**协议的**选项**。

3. 网络层选项协商方法 NCP (Network Control Protocol) ：

   协商网络通信的参数，用于**配置网络层**。

#### 帧格式

![](assets/0302frame01.png)

- F 为 Flag，首尾各占一个字节，值为 0x7E（0111 1110）；

- A 为 Address，由于点到点链路中两端各只有一台主机，没必要区分地址，所以是全 1；

- C 为 Ctrl，为了以后升级可附加其他控制信息；

- PPP 有一个默认 2 个字节的协议字段，通过协商可以为 1 个字节。其值以 0 开始表示网络层协议，以 1 开始用于协商其它协议。
	- 若为 0x0021，则信息字段就是 IP 数据报。
	- 若为 0x8021，则信息字段是网络控制数据。
	- 若为 0xC021，则信息字段是 PPP 链路控制数据。
	- 若为 0xC023，则信息字段是鉴别数据。
	
- 信息部分默认不超过 1500 字节，长度可以协商；
- FCS：即上文“差错控制-检错码”中的帧检验序列（余数 $R$），通过协商可以为 4 个字节。

#### 透明传输

若 PPP 用在异步传输（一个一个字节发送）时采用字符填充法，若用在同步传输（逐位发送）时采用比特填充法。

字符填充法：（RFC1662）

- 将信息字段中出现的每一个 0x7E 字节转变成为 2 字节序列（0x7D，0x5E）。

- 若信息字段中出现一个 0x7D 的字节，则将其转变成为 2 字节序列（0x7D，0x5D）。

- 若信息字段中出现 ASCII 码的控制字符（即数值小于 0x20 的字符)，则在该字符前面要加入一个 0x7D 字节，同时将该字符的编码加以改变。

比特填充法：

- 在发送端，只要发现有 5 个连续 1，则立即填入一个 0。
- 接收端扫描帧中的比特流，每当发现 5 个连续 1 时，就把这 5 个 1 后的一个 0 删除。

【例 1】一个PPP帧的**数据部分**是<u>7D 5E</u> FE 27 <u>7D 5D 7D 5D</u> 65 <u>7D 5E</u>，则真正的数据是（ <u>7E</u> FE 27 <u>7D 7D</u> 65 <u>7E</u> ）。

【例 2】PPP 协议传输比特串 0<u>111 11</u>11 1000 001，在**比特填充**后输出为 ( 0<u>111 110</u>1 1100 0001 )。

#### 工作流程

![](assets/0302liucheng01.png)
PPP 协议的工作流程可以用拨号上网的流程来描述：
1. PPP 协议尝试建立物理层连接，探测物理链路。
2. 之后是 LCP 协商过程，协商内容包括协议字段、FCS，以及是否进行身份认证、承载数据长度，甚至是去除地址和控制字段。
3. 若协商通过且需要身份认证，则进入“鉴别”(Authenticate) 状态，需输入用户名、口令，可采用的协议有：PAP（明文传输口令，不安全）、CHAP（采用“挑战-质询”方式）、RADIUS（认证服务器和接入服务器分开）。
4. 若认证未通过，则断开连接；若认证通过，则进行 NCP 协议网络配置，使用 IPCP（IP 控制）协议，配置 IP 地址、子网掩码、默认网关、DNS 服务器。
5. 最后，断开连接也是由 LCP 来协商。

> 当用户拨号接入 ISP 后，就建立了一条从用户个人电脑到 ISP 的物理连接。这时，用户个人电脑向 ISP 发送一系列的链路控制协议 LCP 分组（封装成多个 PPP 帧)，以便建立 LCP 连接。这些分组及其响应选择了将要使用的一些 PPP 参数。接着还要进行网络层配置，网络控制协议 NCP 给新接入的用户个人电脑分配一个临时的 IP 地址。这样，用户个人电脑就成为互联网上的一个有 IP 地址的主机了。
> 
> 当用户通信完毕时，NCP 释放网络层连接，收回原来分配出去的 IP 地址。接着，LCP 释放数据链路层连接。最后释放的是物理层的连接。（计网谢希仁 P83，有更多内容）

#### PPP 协议无差错控制

在数据链路层出现差错的概率不大时，使用比较简单的 PPP 协议较为合理。

PPP 协议主要承载的数据是 IP 数据报。数据链路层的可靠传输并不能够保证网络层的传输也是可靠的。

帧检验序列 FCS 字段可保证无差错接受。

### 局域网 MAC 协议

广播式链路中，首先需解决**介质访问控制**（Media Access Control，MAC）问题。局域网 LAN 采用广播式通信，节点可访问网内其它节点，是单位、家庭接入网络的主要形式。

需要解决信道接入技术，CSMA/CD（有线局域网）和 CSMA/CA（无线局域网）是目前主要的解决方案。这两个协议在网卡（Network Interface Card，NIC）中实现。

#### 网卡（NIC）

网卡功能是进行数据的串/并行转换和缓存。需要在计算机的操作系统安装设备驱动程序。

![](assets/0303NIC01.png)

IP 地址（逻辑地址）标识网络节点，以 IP 标识的网络空间数据由 CPU 产生，通过总线交给网卡，网卡加上自己的地址，即硬件地址，通过串行方式发送到局域网中。

> 计算机与外界局域网的连接是通过适配器（adapter）。适配器本来是在主机箱内插入的一块网络接口板（或者是在笔记本电脑中插入一块 PCMCIA 卡——个人计算机存储器卡接口适配器）。这种接口板又称为网络接口卡 NIC（Network Interface Card）或简称为“网卡”。由于<u>现在计算机主板上都已经嵌入了这种适配器，不再使用单独的网卡了</u>，因此本书使用适配器这个更准确的术语。在这种通信适配器上面装有处理器和存储器（包括RAM和ROM)。
>
> 请注意，虽然我们把适配器的内容放在数据链路层中讲授，但适配器所实现的功能却包含了**数据链路层**及**物理层**这两个层次的功能。

#### MAC地址

MAC 地址也称为硬件地址、LAN 地址或物理地址。IEEE 802 标准规定 MAC 地址字段可采用 6 字节或 2 字节两种之一。48 位（6 字节）MAC 地址中，前 24 位为厂商标识（组织唯一标识符 OUI），后 24 位为厂家自行指派的扩展标识（扩展唯一标识符 EUI），通常为生产序列号，须保证网卡无重复地址。

适配器从网络上收到 MAC 帧时，首先用检查 MAC 帧中目的地址字段。如果是发往本站的帧则收下，否则丢弃。以混杂模式工作的网卡可收到所有帧。

地址匹配：

- 单播（unicast），一对一，地址完全匹配才接收；
- 多播（multicast，组播），一对多/一对部分，组播地址相同才接收。
- 广播（broadcast），一对全体，地址为全 1，也接收；

IEEE 规定地址字段的第一字节的最低位为 I/G 位。I/G 表示 Individual / Group。

- 当 I/G 位 = 0 时，地址字段表示一个单播地址。
- 当 I/G 位 = 1 时，地址字段表示一个多播地址。
- 48 位地址全为 1，地址字段表示一个表示广播地址。

#### 多址接入协议

局域网拓扑结构有：星型、总线型、环形，因此 MAC 协议需要解决多址接入问题。

![](assets/0303Protocol01.svg)

##### 随机多址接入协议（Contention Media Access Protocol）

1. 完全随机的多址接入协议：ALOHA，易冲突，信道利用率低。

- 纯 ALOHA：用户在新数据产生时立即发送，不考虑信道占用状态。冲突的报文被丢弃。发生冲突后随机延迟。
- 时隙 ALOHA：报文长度是固定的，必须在一个时隙内传输。减小了冲突发生的概率。

![](assets/0303ALOHA01.png)

2. 载波侦听多址协议 (CSMA，Carrier Sense Multiple Access)


- 非坚持 CSMA：当节点监听到信道忙时，不再坚持监听，而是随机后延一段时间再监听。
- 1-坚持 CSMA：当节点要送数据时，先监听信道，若信道忙，就坚持监听，直到信道空闲为止，当空闲时立即发送—帧。
- P-坚持 CSMA：当某站准备发送信息时，它首先监听信道，若空闲，便以概率 $P$ 传送信息，而以概率 $(1-P)$ 推迟发送。

![](assets/0303CSMA01.png)

> *如果其他人正在说话， 等到他们说完话为止。*在网络领域中， 这被称为载波侦听（carrier sensing），即一个节点在传输前先听信道。如果来自另一个节点的帧正向信道上发送，节点则等待直到检测到一小段时间没有传输， 然后开始传输。
>
> *如果与他人同时开始说话， 停止说话。*在网络领域中，这被称为碰撞检测（collision detection，CD）, 即当一个传输节点在传输时一直在侦听此信道。如果它检测到另一个节点正在传输干扰帧， 它就停止传输，在重复“侦听－当空闲时传输”循环之前等待一段随机时间。

##### 受控多址接入协议（Controlled Media Access Protocol）

1. 基于预约的多址接入：节点在发送报文之前进行资源预约，预约成功则无冲突传输。
2. 基于轮询的多址接入：一个节点作为主站，其余节点在主站控制下使用信道，发送报文。
3. 基于令牌的多址接入：所有节点构成一个环形拓扑，令牌沿环进行流转，持有令牌的节点可以占用信道发送报文。

#### 练习与拓展

1.网卡实现的主要功能是（物理层与数据链路层的功能）。

2.在计算机网络中，一方面连接局域网中的计算机，另一方面连接局域网中的传输介质的部件是（网卡）。

---

3.在下列多址接入协议中，不会发生冲突的协议是（A）。

A.TDMA       B.ALOHA       C.时隙ALOHA       D.CSMA

【解析】本题 A 选项为固定分配多址接入协议，其余选项为随机多址接入协议。另外，受控多址接入协议同样不会发生冲突。

> 所谓**固定分配多址接入**是指在用户接入信道时，专门为其分配一定的信道资源（如频率、时隙、码字或空间），用户独享该资源，直到通信结束。
>
> 所谓**随机多址接入**是指用户可以随时接入信道，并且可能不会顾及其他用户是否在传输。当信道中同时有多个用户接入时，在信道资源的使用上就会发生冲突（碰撞）。因此，对于有竞争的多址接入协议如何解决冲突，从而使所有碰撞用户都可以成功进行传输是一个非常重要的问题。
>
> 所谓基于预约的多址接入协议，是指在数据分组传输之前，先进行资源预约。一旦预约到资源（如频率、时隙），则在该资源内可进行无冲突的传输。
>
> > ————————————————
> > 版权声明：本文为CSDN博主「阿正的梦工坊」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
> > 原文链接：https://blog.csdn.net/shizheng_Li/article/details/108150067

---

4.在以下 CSMA 协议中，（C）协议在监听到信道空闲时仍有可能不发送数据。

A.1-坚持CSMA      B.非坚持CSMA      C.P-坚持CSMA      D.以上都不是

5.CSMA协议可以使用多种监听算法来减少冲突发生的概率，下面关于各种监听算法中，描述正确的是（D）。

A.非坚持型监听算法有利于减少网络空闲时间

B.1-坚持型监听算法有利于减少冲突发生的概率

C.P-坚持型监听算法无法减少网络的空闲时间

D.1-坚持型监听算法能够及时抢占信道

> 按总线争用协议来分类，CSMA 有三种类型：
>
> 1）非坚持 CSMA。采用随机的监听延迟时间可以**减少冲突的可能性**，但其缺点也是很明显的：即使有多个站点有数据要发送，因为此时所有站点可能都在等待各自的随机延迟时间，而媒体仍然可能处于空闲状态，这样就使得**媒体的利用率较为低下**。
>
> 2）1-坚持 CSMA。之所以叫“1-坚持”，是因为当一个站点发现媒体空闲的时候，它传输数据帧的概率是 1。1-坚持 CSMA 的优点是：只要媒体空闲，站点就立即发送（即**能及时抢占信道，信道利用率高**）；它的缺点在于：假如有两个或两个以上的站点有数据要发送，**冲突就不可避免**。
>
> 3）P-坚持 CSMA。P-坚持 CSMA 是非坚持 CSMA 和 1-坚持 CSMA 的**折中**。

### CSMA/CD协议

CSMA/CD 协议是目前最流行的局域网——以太网所采用的协议。该协议有两个**基本特点**：

- 采用**无连接、无确认**通信方式：这样做的理由是局域网**信道的质量很好**，因信道质量产生差错的概率是很小的。
- 采用**曼彻斯特编码**方式发送数据。

协议的功能要点：

- 载波侦听：在发送数据前、发送数据中，均检测信道中有无其它节点发送数据。

- 多点接入：多个节点以多点接入的方式连接在一根总线上。

- 冲突检测：节点边发送边监听，判断自己在发送数据时是否与其它节点发生冲突。

  "边听边说"

协议的工作流程：

![](assets/030401.svg)

#### 冲突检测（Collision Detection）

![](assets/0304CD01.png)

CSMA/CD 采用 1-坚持 CSMA（持续监听，空闲即发），包括传输期、争用期、空闲期。

端到端往返时延 $2\tau$ 称为争用期（Contention Period），或碰撞窗口、最小不发生碰撞时间。

经过争用期这段时间还没有检测到碰撞，就能肯定这次发送不会发生碰撞。

![](assets/0304CD02.svg)

$10\text{Mbit/s}$ 以太网取 $51.2$ μs 为争用期的长度，对应帧长 64 字节，此为最小帧长度。

> ...... 以太网规定了一个最短帧长 64 字节，即 512 比特。如果要发送的数据非常少，那么必须加入一些填充字节，使帧长不小于 64 字节。对于 10 Mbit/s 以太网，发送 512 比特的时间需要 51.2 μs，也就是上面提到的争用期。
>
> 由此可见，以太网在发送数据时，如果在争用期（共发送了 64 字节) 没有发生碰撞，那么后续发送的数据就一定不会发生冲突。换句话说，如果发生碰撞，就一定是在发送的前 64 字节之内。由于一检测到冲突就立即中止发送，这时已经发送出去的数据一定小于 64 字节，因此凡长度小于 64 字节的帧都是由于冲突而异常中止的**无效帧**。只要收到了这种无效帧，就应当立即将其丢弃。

- <u>$2\ \times$ 信道长度 / 信号传播速度 = 往返时延（争用期）</u>
- <u>往返时延 $\times$ 传输速率 = 最小帧长度</u>
- <u>$\Longrightarrow$ $2\ \times$ 信道长度 $\times$ 传输速率 / 信号传播速度 = 最小帧长度 (bit)</u>
- 最小帧长度 (bit) = $8\ \times$ 最小帧长度 (字节)

【例 1】考虑建立一个 CSMA/CD 网络，电缆长度是 $1000$ m，无中继器。在上面建立一个 $1$ Gbit/s 速率的 CSMA/CD 网络。若信号在电缆中的传播速度为 $2.0\times10^8$ m/s。则其最小帧长度为 ( 1250 字节 )。

#### BEB 算法

二进制指数后退（binary exponenlial backoff）算法：发生碰撞的站在停止发送数据后，要推迟（退避）一个随机时间才能再发送数据。
- 基本退避时间取为争用期 $2\tau$。

- 从整数集合 $\left[ \, 0,\,1\,\cdots,\,(2^k -1)\,\right]$ 中随机地取出一个数，记为 $r$。
  
  重传所需的时延就是 $r$ 倍的基本退避时间，即：时延 $=r\cdot2\tau$。
  
- 参数 $k$ 的计算公式：$k = \text{min}\,[$ 重传次数 $,\,10\,]$，若成功发送则重传次数归零。

  即当 $k≤10$ 时，参数 $k$ 等于重传次数。

- 当重传达 $16$ 次仍不能成功时即丢弃该帧（即放弃发送），并向高层报告。

【例 1】在以太网的 BEB 算法中，若发生了 4 次碰撞，则站点会在 0~（15）中选择随机数。

【例 2】在以太网的 BEB 算法中，如果发生了 11 次碰撞，那么站点会在 0~（1023）中选择一个随机数。

#### 阻塞信号（Jam Signal）

![](assets/0304jamsignal01.png)

在以太网上“阻塞”信号的功能是：所有站点接收到“阻塞”信号时，立即**停止发送数据**。

> 下面介绍**强化碰撞**的概念。这就是当发送数据的站一旦发现发生了碰撞时，除立即停止发送数据外，还要再继续发送 32 比特或 48 比特的人为**干扰信号（jamming signal）**，以便让所有用户都知道现在已经发生了碰撞（如上图所示）。对于 10 Mbit/s 以太网，发送 32（或 48）比特只需要 3.2（或 4.8）μs。
>
> 图中的 B 站在得知发生碰撞后，也要发送人为干扰信号。
>
> 总线被占用的时间是 $T_{\mathrm{B}}+T_{\mathrm{J}}+\tau$。（超过该时间后信道才会空闲）

#### CSMA/CD 协议帧格式

![](assets/0304CDframe01.png)

前导字段（8 字节）：
- 第一部分 Preamble：前导码字段，标准的前导部分，其格式为 7 个字节的 10101010，形成方波，告诉节点有载波到达，使接收端进入同步状态。
- 第二部分 SFD：帧开始标志，1 个字节，0111 1110

Dest. Addr.：目的节点 MAC 地址，DA；Source. Addr.：源节点 MAC 地址，SA。

Type：上层封装的协议。

Data：数据，为检测冲突，以太网帧长度最少为 64 字节，即数据最少为 46 字节。

FCS：帧检验序列，用于循环冗余校验码。

Inter Frame Gap：帧间间隔，必须在检测到**信道空闲后**等待至少 9.6 μs 才能发送数据。

#### 链路参数（link parameter）

CSMA/CD 定义了链路参数 $α$ 为端到端传播时延和帧发送时间之比。式中 $R$ 为传输速率，$d$ 为信道长度，$L$ 为帧长度，$V$ 为传播速度。

CSMA/CD 的极限信道利用率 $U_{\max}$ 和链路参数 $\dfrac{\tau}{T_0}$ 的关系如下。

$$
\alpha=\dfrac{prop a gation\ time}{frame\ time}=\dfrac{Rd}{LV}=\dfrac{\tau}{T_0}\qquad U=\frac{T_{t}}{T_{t}+T_{c}}\quad  U_{\max}=\frac{T_{0}}{T_{0}+\tau}=\frac{1}{1+\alpha}
$$

> 参数 $α$ 的值尽量小，以提高信道利用率。以太网端到端的距离受到限制，以太网帧的长度应尽量长些。

#### 练习与拓展

【例 1（谢书 3-24 题）】假定站点 A 和 B 在同一个 $10$ Mbit/s 以太网网段上。这两个站点之间的传播时延为  $225$ 比特时间。现假定 A 开始发送一帧，并且在 A 发送结束之前 B 也发送一帧。如果 A 发送的是以太网所容许的最短的帧。那么 A 在检测到和 B 发生碰撞之前能否把自己的数据发送完毕？换言之，如果 A 在发送完毕之前并没有检测到碰撞，那么能否肯定 A 所发送的帧不会和 B 发送的帧发生碰撞？（提示：<u>在计算时应当考虑到每一个以太网帧在发送到信道上时，在 MAC 帧前面还要增加若干字节的前同步码和帧定界符。</u>）

**解：**站点 A 和 B 在同一个 10Mb/s 以太网网段上，则在争用期内站点 A 发送的最短帧长是 10Mbit/s $\times$ 51.2us = 512bit，即 64 字节，**加上前导 8 个字节**，共 576bit。

A 节点在 0 时刻发送数据，经过 225 比特时到达 B，载波持续 576 比特时，共 801 比特时。B 在 225 比特时间就能检测到 A 的信号，在此之后直到接收完 A 发送的数据都不可能发送信号，因此 B 发送数据的时间肯定小于 225 比特时间。

设 B 在第 $n$ 比特时间开始发送数据，则 A 将会在 $n+225$ 比特时间检测到冲突，其中 $n<225$，故 $n+225\le450<576$，即 A 检测到冲突的时间必定小于 A 发送完毕的时间。

所以，A 在检测到和 B 发生碰撞之前不能把自己的数据发送完毕，即，如果 A 在发送完毕之前并没有检测到碰撞，则能肯定 A 所发送的帧不会和 B 发送的帧发生碰撞。

![](assets/0304lianxi01.svg)

【例 2（谢书 3-25 题）】若站点 A 和 B 在 $t=0$ 时同时发送了数据帧。当 $t=225$ 比特时间 A 和 B 同时检测到发生了碰撞, 并且在 $t=225+48=273$ 比特时间完成了干扰信号的传输。A 和 B 在 CSMA/CD 算法中选择不同的 $r$ 值退避。假定 A 和 B 选择的随机数分别是 $r_A=0$ 和 $r_B=1$。试问 A 和 B 各在什么时间开始重传其数据帧？A 重传的数据帧在什么时间到达 B？A 重传的数据会不会和 B 重传的数据再次发生碰撞？B 会不会在预定的重传时间停止发送数据？

**解：**A 重传的数据帧到达 B 的时间包括：<u>冲突发现＋干扰信号传输＋A、B 干扰信号传播+退避时间＋帧最小间隔＋数据传播时延</u> $=225+48+225+0+96+225=819$ 比特时；B 重新侦听数据链路时间包括：<u>冲突发现＋干扰信号传输＋退避时间</u> $= 225+48+512=785$ 比特时间；$785<819$，此时 A 还在传数据给 B，B 侦听到信道忙，不会发送数据。（下图更准确）

![](assets/0304lianxi02.png)

> 图 T-3-25 给出了在几个主要时间所发生的事件。所有的时间单位都是“比特时间”。$t=0$ 时，A 和 B 开始发送数据。
>
> $t = 225$ 比特时间，A 和 B 都检测到碰撞。
>
> $t = 273$ 比特时间，A 和 B 结束干扰信号的传输。A 和 B 都马上执行退避算法。
>
> 因为 $r_A=0$ 和 $r_B= 1$，所以 A 立即检测信道，而 B 要推迟 $512$ 比特时间后才检测信道。也就是说，A 在 $t = 273$ 比特时间就开始检测信道，但 B 要等到 $t = 785$ 比特时间才检测信道。
>
> 当 $t=273＋225=498$ 比特时间，B 的干扰信号中的最后一个比特到达 A；A 检测到信道空闲。但 A 还不能马上发送数据，必须等待 $96$ 比特时间后才能发送数据（我们应当注意到，以太网的帧间最小间隔就是 $9.6$ us，相当于 $96$ 比特时间）。
>
> 这样，当 $t=498+96=594$ 比特时间，A 开始发送数据。
>
> 再看一下 B 什么时候可以发送数据。当 $t=273+512=785$ 比特时间（B 从 $273$ 比特时间算起，经过 1 个争用期 $512$ 比特时间），再次检测信道。如空闲，则 B 在 $96$ 比特时间后，即将在 $t=785+96=881$ 比特时间发送数据。请注意，只有从 $785$ 比特时间一直到 $881$ 比特时间 B 一直检测到信道是空闲的，B 才在 $881$ 比特时间发送数据。
>
> 当 $t=594+225=819$ 比特时间，A 在  $594$  比特时间发送的数据到达 B。
>
> 可见从 $785$ 比特时间算起，才经过了 $34$ 比特时间，B 就检测到信道忙，因此 B 在预定的 $881$ 比特时间不发送数据。

---

1. 载波监听多路访问冲突检测 (CSMA/CD) 技术，一般用于 ( **总线型网络** ) 拓扑结构。

2. 采用 CSMA/CD 协议的以太网，其通信是工作在 ( **半双工** ) 方式。

> 显然，在使用 CSMA/CD 协议时，一个站<u>不可能同时进行发送和接收</u>（但必须边发送边监听信道）。因此使用 CSMA/CD 协议的以太网不可能进行全双工通信而只能进行双向交替通信（半双工通信）。

3. 以太网介质访问控制技术CSMA/CD的机制是（ **争用信道** ）。
4. 以太网的MAC提供的是（ **无连接的不可靠的服务** ）。

> 为了通信的简便，以太网采取了以下两种措施：
>
> 第一，采用较为灵活的**无连接**的工作方式，即不必先建立连接就可以直接发送数据。适配器对发送的数据帧不进行编号，也不要求对方发回确认。这样做可以使以太网工作起来非常简单，而<u>局域网信道的质量很好，因通信质量不好产生差错的概率是很小的。</u>因此，以太网提供的服务是尽最大努力的交付，即**不可靠的交付**。当目的站收到有差错的数据帧时（例如，用CRC查出有差错），就把帧丢弃，其他什么也不做。对有差错帧是否需要重传则由高层来决定。例如，如果高层使用TCP协议，那么TCP就会发现丢失了一些数据。于是经过一定的时间后，TCP就把这些数据重新传递给以太网进行重传。但以太网并不知道这是重传帧，而是当作新的数据帧来发送。

5. 有关曼彻斯特编码的正确叙述是（B）．

   A.每个信号起始边界作为时钟信号有利于同步

   B.**将时钟与数据取值都包含在信号中**

   C.这种模拟信号的编码机制特别适合于传输声音

   D.每位的中间不跳变表示信号的取值为 0

> 位中间的**跳变作为时钟信号**，每个码元的电平作为数据信号，因此选项 B 正确。**曼彻斯特编码将时钟和数据包含在数据流中，在传输代码信息的同时，也将时钟同步信号一起传输到对方**，因此选项 A 错。声音是模拟数据，而**曼彻斯特编码最适合传输二进制数字信号**，因此选项 C 错。
>
> > ————————————————
版权声明：本文为 CSDN 博主「静妮子 i」的原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接及本声明。
原文链接： https://blog.csdn.net/qq_39848541/article/details/124019442


> 第二，以太网发送的数据都**使用曼彻斯特（Manchester）编码的信号**。......二进制基带数字信号通常就是高、低电压交替出现的信号。使用这种信号的最大问题就是当出现一长串连续的 1 或连续的 0 时，接收端就无法从收到的比特流中**提取位同步（即比特同步）信号**。......曼彻斯特编码的编码方法是把每一个码元再分成两个相等的间隔。码元 1 是前一个间隔为低电压而后一个间隔为高电压。码元 0 则正好相反，从高电压变到低电压（也可采用相反的约定，即 1 是“前高后低”而 0 是“前低后高”）。这样就保证了在每一个比特的**正中间**出现一次电压的转换，而接收端就利用这种**电压的转换**很方便地把位同步信号提取出来。但是从曼彻斯特编码的波形图也不难看出其缺点，这就是它所占的频带宽度比原始的基带信号增加了一倍（因为每秒传送的码元数加倍了）。
>


### 无线网MAC协议



### CSMA/CA协议



### 物理层和数据链路层网络互联设备







## 参考资料
1. [西北工业大学 SPOC-计算机网络-陈旿](https://www.icourse163.org/spoc/course/NWPU-1465058174)
1. [计算机网络微课堂（有字幕无背景音乐版）](https://www.bilibili.com/video/BV1c4411d7jb?p=23&vd_source=5053a1054efc12e95eb76c066ad13f8f)
2. 百度百科
3. 互动百科
4. 维基百科
5. 计算机网络/谢希仁编著.—8 版. 一北京: 电子工业出版社，2021.6
6. 计算机网络释疑与习题解答/谢希仁编著. 一北京: 电子工业出版社，2017.7
7. 计算机网络:自顶向下方法(原书第7版)/(美)詹姆斯·F.库罗斯(James F. Kurose),(美)基思·W.罗斯(Keith W.Ross)著;陈鸣译.一北京:机械工业出版社，2018.5
8. 图解网络-小林coding-v3.0
